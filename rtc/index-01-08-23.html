<html>

<head>
    <meta charset="utf-8"/>
    <title>ジャコス無料通話</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="viewport" content="width=device-width, user-scalable=no" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="manifest" href="manifest.json" />
    <meta http-equiv='cache-control' content='no-cache'>
    <meta http-equiv='expires' content='0'>
    <meta http-equiv='pragma' content='no-cache'>
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="css/materialize.css" media="screen,projection"/>
    <link rel="stylesheet" type="text/css" href="css/custom.css?v=9">
    <link rel="stylesheet" type="text/css" href="css/custom/landing-page.css?v=9">
    <!--<link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection" />-->
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/materialize.js"></script>
    <script src="js/sweetalert.min.js"></script>
</head>
<style>
    @media (max-width:620px) and (min-width:600px) {
        .btn-large{
            /*font-size: 30px !important;*/
        }
        #user-calling-mode{
            font-size: 30px !important;
        }
    }

    @media only screen and (max-width: 320px) {
        .top-bar-btn-sec{
            font-size: 22px !important;
        }
        /*.custom-middle {
            font-size: 12px;
        }
        .btn-large{
            font-size: 25px !important;
        }
        .custom-middle{
            font-size: 12px !important;
        }*/
    }

    @font-face {
        font-family: 'hkgyokk';
        src: url('fonts/hkgyokk.ttf') format('truetype')
    }

    body {
        /*font-family: 'hkgyokk';*/
        background: #eee;
    }

    .custom-font {
        font-family: 'hkgyokk';
    }
    .tooltiptext {
        visibility: hidden;
        font-family: auto;
        background: black;
        border-radius: 5px;
        position: absolute;
        top: 60px;
        color: white;
        padding: 3px 6px;z-index: 999;
    }

    .pass-book-button{
        width: 100%;
        border: 2px solid #296e91;
        height: 47px;
        border-radius: 8px;
        margin-bottom: 6px;
        padding: 0;
        letter-spacing: 6px;
        font-size: 18px;
        font-weight: 600;
    }
    #phoneBookModal .left-image{
        margin-right: 5px;
    }
    #phoneBookModal img{
        width: 114px;
    }
</style>

<body>
<div>
    <select style="display: none;" id="audioOutput"></select>
</div>
<!--  <nav class="light-blue lighten-1" role="navigation">
    <div class="nav-wrapper ">
        <a id="logo-container" class="brand-logo">ジャコス無料通話</a>
        <ul class="right">
            <li><a onclick="goToLast()" class="waves-effect waves-light btn">戻る</a></li>
        </ul>
    </div>
</nav> -->
<div id="callPage" class="call-page" style="padding: 0;min-height: 100vh;">
    <div class="row" style="margin: 0">
        <div class="col s12 m3 l4 "></div>
        <div class="col s12 m6 l4  z-depth-1 card-panel" style="height: 100vh; background-image: linear-gradient(to right, #7c6b6e, #ad9f9f,#7c6b6e);margin: 0;">
            <form class="login-form">
                <div>
                    <audio style="display:none" id="remoteAudio" class="audio_play" controls autoplay></audio>
                    <audio style="display:none" id="remoteAudio2" class="audio_play" controls autoplay></audio>
                    <audio style="display:none" id="music" src="baby.mp3"></audio>
                    <div id="connectedText" style="display:none ;color: green; font-size: 18px" align="center"></div>
                </div>
                <!--  <div class="row margin_bottom">
                    <div class="input-field col s11">
                        <i class="mdi-social-person-outline prefix"></i>
                        <input id="callToUsernameInput" type="number">
                        <label for="username" class="center-align">電話番号</label>
                    </div>
                </div>-->
                <div class="row" style="margin-bottom: 15px;">
                    <div class="col s12 m12 l12" style="display: flex; align-items: center;">
                      <span id="iconP" style="font-size: 40px; font-weight: bold; padding: 5px; display: none;">P</span>
                      <div style="font-size: 30px; font-weight: bold; color: #FFFFFF"> ポタコン</div>
                    </div>
                    <div class="col s7 m7 l7">
                        <div id="MyClockDisplay" class="clock" onload="showTime()"></div>
                        <div id="MyDate" class="date"></div>
                    </div>
                    <div class="col s5 m5 l5 right">
                        <a onclick="pageView('view/about.html?user_mobile_number=','0')" data-position="top" data-tooltip="初期画面に戻ります" class="btn tooltipped waves-effect waves-light btn-large top-bar-btn" data-id="5th">初</a>
                        <a onclick="pageView('view/share.html?user_mobile_number=','0')" data-position="top" data-tooltip=" ボタンを押す" class="btn tooltipped waves-effect waves-light btn-large top-bar-btn-sec" data-id="5th">紹介</a>
                     </div>

                    <div class="col s4 m4 l4 right">
                        <!--                        <a class="waves-effect waves-light back-btn">戻る</a>-->
                    </div>

                </div>
                <div class="row">
                    <div class="col s10 m6 l6 offset-s1 offset-m3 offset-l3" style="padding: 0">
                        <a id="user-calling-mode" onclick="openFreeCallingAlertModal()" class="waves-effect waves-light btn-large"  data-id="16th" style="width: 100%; height: 56px; font-size: 44px; font-family: 'hkgyokk'">
                            無料通話
                        </a>
                    </div>
                </div>
                <div class="row custom-font" style="margin-bottom: 0px;position:relative;">
                    <div class="tooltiptext"></div>
                    <div class="col s4 m4 l4 center tooltip" style="margin-bottom: 10px;padding: 0 3px" >
                        <a onclick="pageView('view/contact.html?user_mobile_number=','1')" data-position="top" data-tooltip="個人・個人用の電話帳" data-id="14th" class="btn tooltipped waves-effect waves-light btn-large tooltip"
                        >個

                        </a> <!--id="get-contact-list"-->

                    </div>
                    <div class="col s4 m4 l4 center" style="margin-bottom: 10px;padding: 0 3px">
                        <a  onclick="pageView('view/contact.html?user_mobile_number=','2')" data-position="top" data-tooltip="会社・会社用の電話帳"  class="btn tooltipped waves-effect waves-light btn-large" data-id="15th">会
                        </a>
                    </div>
                    <div class="col s4 m4 l4 center hide" style="margin-bottom: 10px;padding: 0 3px">
                        <a onclick="pageView('view/contact_selection.html?user_mobile_number=','0')" class="btn tooltipped waves-effect waves-light btn-large"  data-id="16th">無料
                        </a>
                    </div>
                    <div class="col s4 m4 l4 center" style="margin-bottom: 10px;padding: 0 3px">
                        <a  onclick="pageView('view/outgoing-call.html?user_mobile_number=','0')" data-position="top" data-tooltip="発信・電話をかける" class="btn tooltipped waves-effect waves-light btn-large"  data-id="3rd">発</a>
                    </div>
                    <div class="col s4 m4 l4 center" style="margin-bottom: 10px;padding: 0 3px">
                        <a onclick="pageView('view/call-history.html?user_mobile_number=','0')" data-position="top" data-tooltip="履歴・受発信の履歴" class=" btn tooltipped waves-effect waves-light btn-large"  data-id="4th">歴</a>
                    </div>
                    <div class="col s4 m4 l4 center" style="margin-bottom: 10px;padding: 0 3px">
                        <a onclick="pageView('view/add-contact.html?user_mobile_number=','0')" data-position="top" data-tooltip="新規・新規登録ができます" class="btn tooltipped waves-effect waves-light btn-large" data-id="5th">新</a>
                    </div>
                    <div class="col s4 m4 l4 center hide" style="margin-bottom: 10px;padding: 0 3px">
                        <a href="#phoneBookModal" data-position="top" data-tooltip="検索・電話帳の検索" class="modal-trigger btn tooltipped waves-effect waves-light btn-large" data-id="6th">検</a>
                    </div>
                    <div class="col s4 m4 l4 center" style="margin-bottom: 10px;padding: 0 3px">
                        <a onclick="pageView('view/setting.html?user_mobile_number=','0')" data-position="top" data-tooltip="設定・各種の設定" class="btn tooltipped waves-effect waves-light btn-large" data-id="7th">設</a>
                    </div>
                    <div class="col s4 m4 l4 center hide" style="margin-bottom: 10px;padding: 0 3px">
                        <a onclick="pageView('view/battery.html?user_mobile_number=','0')" data-position="top" data-tooltip="充電・充電残量の確認" class="btn tooltipped waves-effect waves-light btn-large" data-id="8th">電</a>
                    </div>

                </div>

                <div class="row ">
                    <div class="col s12 m12 l12 center " style="margin: 5px 0">
                        <p class=" waves-effect waves-light custom-middle">
                            各ボタンを長押し<br>
                            するとナビを表示します
                        </p>
                    </div>
                </div>

                <div class="row" style="margin-bottom: 10px">
                    <div class="col s6 m6 l6 center hide" style="margin-bottom: 5px;padding: 0px 3px;">
                        <a class=" waves-effect waves-light btn-large" data-id="9th"
                           style="width: 100%;font-size: 20px;background: #80B4C2">留守</a>
                    </div>
                    <div class="col s6 m6 l6 center hide" style="margin-bottom: 5px;padding: 0px 3px;">
                        <a class=" waves-effect waves-light btn-large" data-id="10th"
                           style="width: 100%;font-size: 20px;background: #80B4C2">不在</a>
                    </div>
                    <div onclick="logout()" class="col s4 m4 l4 center hide" style="margin-bottom: 5px;padding: 0px 3px;">
                        <a class=" waves-effect waves-light btn-large" data-id="10th"
                           style="width: 100%;font-size: 20px;background: #80B4C2">終了</a>
                    </div>
                    <div class="col s4 m4 l4 center hide" style="margin-bottom: 5px;padding: 0px 3px;">
                        <a class=" waves-effect wave s-light btn-large" data-id="11th"
                           style="width: 100%;font-size: 20px;background: #80B4C2">00</a>
                    </div>
                </div>
                <div class="row hide">
                    <div class="col s4 m4 l4 center" style="margin-bottom: 10px">

                    </div>
                    <div class="col s4 m4 l4 center" style="margin-bottom: 10px;padding: 0 3px">
                        <img onclick="" src="view/rsc/applist_btn.png" alt=""
                             style="cursor: pointer;width: 100%; height: 60px;">
                        <!--                        <a  class=" waves-effect waves-light btn-large" style="width: 100%;font-size: 20px;background: #43260C">アプリ一覧</a>-->
                    </div>
                    <!--                    onclick="getContacts()"-->
                    <div class="col s4 m4 l4 center" style="margin-bottom: 10px;padding: 0 3px">
                        <a class=" waves-effect waves-light btn-large" data-id="13th"
                           style="width: 100%;font-size: 16px;background: #3A4AA6;line-height: normal;padding: 8px 20px;">待ち受け画面</a>
                    </div>
                </div>

                <!-- display: none; -->
                <div id="divForAllValues_" class="row row-padding">
<!--                    <div id="statusDiv"  class="col s4 l4 content-wrap-outbox" style="display: none;  position: fixed; top:25%; left: 36%; z-index: 1000; width: 25%">-->
<!--                        <div class="content-wrap" style="background-color: #FFFFFF; text-align: center; padding: 0px 0px 10px 10px; font-size: 32px; border-radius: 8px;">-->
<!--                            <p style="color: #00B050" id="statusText"></p>-->

<!--                        </div>-->
<!--                    </div>-->
                    <div id="statusDiv"  class="col s4 l4 content-wrap-outbox" style="display: none;  position: fixed; top:0; left: 0 !important; z-index: 1010; width: 100% !important; padding: 0;height: 100vh;background: #a78e91">
                        <div class="content-wrap row" style=" text-align: center; padding: 0px 0px 0px 0px; font-size: 32px; border-radius: 8px;height: 65%;margin: 0">
                            <div class="col s12 m12 l12" style="padding-top: 25px">
                                <img src="./view/rsc/call_pic.jpg" alt="" style="height: 100px">
                            </div>
                            <div class="col s12 m12 l12" id="statusText">
                            </div>
                            <div class="col s12 m12 l12" id="callDuration"></div>

                            <!--                            <p style="color: #ffffff;padding: 0px 0px 10px 10px" id="statusText"></p>-->

                        </div>
                        <div class="content-wrap row" style=" text-align: center; padding: 0px 0px 0px 0px; font-size: 32px; border-radius: 8px;">
                            <div class="col s12 l12 m12" style="padding-bottom: 15px;">
                                <a id="" class=" waves-effect waves-light btn-large"
                                   style="height: 38px;border: 1px solid #A78E91;font-size: 21px; line-height: 40px;width: 50%;border-radius: 22px;background: #b19b9e">スピーカー OFF</a>
                            </div>
                            <div class="col s12 l12 m12" style="padding: 0">
                                <a id="hangUpBtn" class=" waves-effect waves-light btn-large"
                                   style="height: 45px;font-size: 26px; line-height: 47px;width: 92%;border-radius: 5px;background: #F6403B;">終了</a>
                            </div>
                        </div>

                    </div>
                </div>


            </form>
        </div>
        <!--<div class="col s4"></div>-->
    </div>
</div>
<div class="col s12 m3">
    <div id="modal111" class="modal">
        <div class="content-box">
            <p id="usernotOnline"></p> <a onclick="sendMail()" class="waves-effect waves-light btn custom_btn">かける</a>
            <a onclick="closeModalForOnline()" class="waves-effect waves-light btn custom_btn2">けないか</a></div>
    </div>
</div>
<div class="col s4 m2 l2">
    <div id="modalMakeCall" class="modal">
        <div class="modal-content" style=" margin:0">
            <div class="modal-header">
                <h4 style="font-size: 32px" id="modalMakeCallHead"></h4></div>
            <a onclick="requestCall()" style="background-color: #107FC9;font-size: 40px; height: 55px;padding: 10px"
               class="waves-effect waves-light btn">発信</a> <a onclick="closeModelMakeCall()"
                                                              style="background-color: #EA6B75; margin-left: 20px;font-size: 40px; height: 55px;padding: 10px"
                                                              class="waves-effect waves-light btn">戻る</a></div>
    </div>
</div>
<div class="col s4 m2 l2">
    <div id="modalOfflineUser" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h4 style="font-size: 32px" id="offlineModalHead"></h4></div>
            <a onclick="sendMail()" style="background-color: #107FC9;font-size: 40px; height: 55px;padding: 10px"
               class="waves-effect waves-light btn">発信</a> <a onclick="closeModalOfflineUser()"
                                                              style="background-color: #EA6B75; margin-left: 20px;font-size: 40px; height: 55px;padding: 10px"
                                                              class="waves-effect waves-light btn">戻る</a></div>
    </div>
</div>
<div class="col s4 m2 l2">
    <div id="modalReceiveCall" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h6>発信ボタンを押して下さい。</h6></div>
            <a onclick="answerCall()" style="background-color: #107FC9;" class="waves-effect waves-light btn">発信</a> <a
                onclick="closeModalRcvCall()" style="background-color: #EA6B75;"
                class="waves-effect waves-light btn">戻る</a></div>
    </div>
</div>

<div class="col s4 m2 l4">
    <div id="settingsModal" class="modal">
        <div class="modal-box">
            <div class="col s4 m2 l2 btn-box"><a onclick="vibSetting()"
                                                 style="width: 230px;background: #007e12; font-size: 30px ;padding: 0"
                                                 class="waves-effect waves-light btn">マナーモード</a></div>
            <div class="col s4 m2 l2 btn-box"><a onclick="showRingToneSettingAlert()" id="ringtoneSetting"
                                                 style="width: 230px;background: #007e12; font-size: 30px ;padding: 0"
                                                 class="waves-effect waves-light btn ">着信音</a></div>
            <div class="col s4 m2 l2 btn-box"><a onclick="switchSpeakers()" id="spekerbtn"
                                                 style="width: 230px;background: #007e12; font-size: 30px ;padding: 0"
                                                 class="waves-effect waves-light btn ">スピーカーOFF</a></div>
            <div class="col s4 m2 l2 btn-box"><a class="waves-effect waves-light btn " onclick="settingModal(22)">戻る</a>
            </div>
        </div>
    </div>
</div>
<!-- <div class="col s4 m2 l2">
    <div id="modalUserUserNotFound" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h6 id="modalUserUserNotFoundHead"></h6>
            </div>
            <a onclick="callThisUser()" style="background-color: #107FC9;" class="waves-effect waves-light btn">発信</a>
            <a onclick="closeUserNotFound()" style="background-color: #EA6B75; margin-left: 18px" class="waves-effect waves-light btn">戻る</a>
        </div>
    </div>
</div> -->
<div class="col s4 m2 l4">
    <div id="noInternet" class="modal">
        <div class="modal-box">
            <div class="col s4 m2 l2 btn-box">
                <h5 id="reConnectTextChange">接続確認中です。<br>しばらくお待ち下さい。</h5></div>
        </div>
    </div>
</div>
<div class="col s4 m2 l4">
    <div id="index-" class="modal">
        <div class="modal-box">
            <div class="col s4 m2 l2 btn-box">
                <h5>接続確認中です。</h5></div>
        </div>
    </div>
</div>
<div class="col s4 m4 l6">
    <div id="mymodal33" class="modal">
        <div style="background-color:#B7DDF2; height: 100%; overflow: hidden; padding: 20px; " class="modal-box2">
            <div class="col s4 m2 s6 ">
                <h6>ユーザー追加</h6>
                <h6>追加するユーザー名を入れて下さい</h6></div>
            <div class="row">
                <div class="col s12 l12 ">
                    <form action=""> お名前:
                        <input id="userNameToAdd" style="background-color: #fff;" type="text" name="firstname"
                               placeholder="山田さん"></form>
                </div>
                <div class="col s12 l12 ">
                    <form action=""> 電話番号
                        <input id="userNumberToAdd" style="background-color: #fff;" type="text" name="lastname"
                               placeholder="０９０－９９９９－９９９９"></form>
                </div>
                <div class="row">
                    <div class="col s5"><a onclick="closeModalForAddUser()"
                                           style="background-color: #EA6B75; padding:0; width:100px"
                                           class="waves-effect waves-light btn">戻る</a></div>
                    <div style="margin-left: 20px" class="col s5"><a onclick="ownNumberRegistration()"
                                                                     style="background-color: #107FC9; padding:0 ; width:100px"
                                                                     class="waves-effect waves-light btn">完了</a></div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="col s4 m4 l4">
    <div id="phoneNumber" class="modal">
        <div style="background-color:#B7DDF2; height: 100%; overflow: hidden; padding: 20px; " class="modal-box2">
            <div class="col s4 m2 s6 ">
                <h6>続行するには電話を入力してください。</h6></div>
            <div class="row">
                <div class="col s12 l12 ">
                    <form action=""> 電話番号
                        <input id="mobilenumber" style="background-color: #fff;" type="text" name="lastname"
                               placeholder="０９０－９９９９－９９９９"></form>
                </div>
                <div class="row">
                    <div class="col s5"><a onclick="$('#phoneNumber').modal('close');"
                                           style="background-color: #EA6B75; padding:0; width:100px"
                                           class="waves-effect waves-light btn">戻る</a></div>
                    <div style="margin-left: 20px" class="col s5"><a onclick="openContactList()"
                                                                     style="background-color: #107FC9; padding:0 ; width:100px"
                                                                     class="waves-effect waves-light btn">完了</a></div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="col s4 m4 l4">
    <div id="contact-lists" class="modal" style="">
        <div style=" height: 100%; overflow: hidden" class="modal-box2">
            <div class="col m12 s12 " style="background: #918283;display: flex; min-height: 37px; padding-right: 35px;">
                <h6 style="margin: 0">0000000。</h6>

                <a onclick="$('#contact-lists').modal('close');"
                   style="background-color: #eeeeee; padding:0;color: black;position: absolute;right: 0"
                   class="waves-effect waves-light btn">戻る</a>

            </div>
        </div>
        <div class="row" id="contact-list-view">
            <!--                <div class="col s12 l12 " style="border-bottom: 1px solid #c5c3c3;padding-left: 30px">-->
            <!--                    <div>Oni</div>-->
            <!--                    <div>131212</div>-->
            <!--                </div>-->

        </div>
    </div>
</div>

<div id="free-call-alert-modal" class="modal">
    <div class="modal-box">
        <div class="swal-section">
            <span>会社か個人を選んで下さい</span>
        </div>
    </div>
</div>

<div id="pwa-install-modal" class="modal">
    <div class="modal-box">
        <div class="swal-section">
            <a id="install-pwa-app" class="waves-effect waves-light btn-large" data-id="16th" style="width: 100%; height: 56px; font-size: 34px; font-family: 'hkgyokk'">
                アイコン表示
            </a>
        </div>
    </div>
</div>
<!-- Modal Trigger -->
<!--<a class="waves-effect waves-light btn modal-trigger" href="#modal1">Modal</a>-->

<!-- historyModal -->
<div id="historyModal" class="modal" style="max-width: 300px">
    <div class="modal-content center" style="padding: 0px 13px 17px">
        <h5>データがありません </h5>
        <hr style="border: 1px solid #1cb8ee">
        <h5>メインに戻ります</h5>
        <img style=" cursor: pointer;" onclick="$('#historyModal').modal('close');" src="images/4.png">
    </div>
</div>
<!-- phoneBookModal -->
<div id="phoneBookModal" class="modal" style="max-width: 263px">
    <div class="modal-content" style="padding: 0px 13px 17px">
        <h5>電話帳を表示します </h5>
        <img onclick="pageView('view/contact.html?user_mobile_number=','1')" class="left-image" style=" cursor: pointer;" src="images/5.png">
        <img onclick="pageView('view/contact.html?user_mobile_number=','2')" style=" cursor: pointer;" src="images/6.jpg">
        <hr style="border: 1px solid #1cb8ee">
        <img  onclick="pageView('view/contact.html?user_mobile_number=','3')" class="left-image" style=" cursor: pointer;" src="images/7.jpg">
        <img onclick="$('#phoneBookModal').modal('close');" style=" cursor: pointer;" src="images/8.jpg">
        <button class="pass-book-button btn hide">シークレット設定
            </button>
        <button class="pass-book-button btn hide" style="background: #5082bf">シー死y卜呼出·解除</button>
    </div>
</div>
<script src="client11.js?v=797979797979797955&v1=00000000000055"></script>
<script src="js/app/landing-page.js?v=999999254175845865"></script>
<script src="js/long-press.js"></script>
<script>
    // $('#index-').modal();
    // $('#index-').modal('open');
    // document.addEventListener('DOMContentLoaded', function() {
    //     var elems = document.querySelectorAll('#modal1');
    //     var instances = M.Modal.init(elems, options);
    // });

    // Or with jQuery

    $(document).ready(function () {
        $('#historyModal').modal();
        $('#phoneBookModal').modal();
    });

    // $('#free-call-alert-modal').modal();
    // $('#free-call-alert-modal').modal('open');
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker
            .register('sw.js')
            .then(function (registration) {
                console.log('Registration successful, scope is:', registration.scope);
                registration.update();
                console.log('Registration Update')

            })
            .catch(function (error) {
                console.log('Service worker registration failed, error:', error);
            });
        caches.keys().then(function(cacheNames) {
            cacheNames.forEach(function(cacheName) {
                console.log(cacheName)
                caches.delete(cacheName);
                location.reload(true);
            });
        });
    }

    //===========check pwa install in our divice================
    // variable store event
    window.deferredPrompt = {};
    // get button with id
    const install_button = document.querySelector('#install-pwa-app');

    // if the app can be installed emit beforeinstallprompt
    window.addEventListener('beforeinstallprompt', e => {
        // this event does not fire if the application is already installed
        // then your button still hidden ;)

        // show button with display:block;
        //install_button.style.display = 'block';
        $('#pwa-install-modal').modal();
        $('#pwa-install-modal').modal('open');
        // prevent default event
        e.preventDefault();

        // store install avaliable event
        window.deferredPrompt = e;

        // wait for click install button by user
        install_button.addEventListener('click', e => {
            window.deferredPrompt.prompt();
            window.deferredPrompt.userChoice.then(choiceResult => {
                if (choiceResult.outcome === 'accepted') {
                    // user accept the prompt
                    console.log(choiceResult.outcome, 'choiceResult.outcome')
                    // lets hidden button
                    $('#pwa-install-modal').modal('close');
                    //install_button.style.display = 'none';
                } else {
                    console.log('User dismissed the prompt');
                }
                window.deferredPrompt = null;
            });
        });
    });

    // if are standalone android OR safari
    if (window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone === true) {
        // hidden the button
        console.log('display-mode: standalone')
        $('#pwa-install-modal').modal('close');
        //install_button.style.display = 'none';
    }

    // do action when finished install
    window.addEventListener('appinstalled', e => {
        console.log("success app install!");
    });
   // ============install pwa app end=================

   function logout(){
       localStorage.clear();
       window.location.href = "index.html";
    }
    ownNumberRegistrationCheck()

    function ownNumberRegistrationModal() {
        $('#mymodal33').modal();
        $('#mymodal33').modal('open');
    }

    function ownNumberRegistrationModalClose() {
        $('#mymodal33').modal('close');
    }

    function ownNumberRegistrationCheck() {
        if (!localStorage.getItem("myNumber")) {
            ownNumberRegistrationModal()
        } else {
            let myN = JSON.parse(localStorage.getItem("myNumber"))
            let myID = urlParam('user_mobile_number');
            if (!myID){
                location.href = '?user_mobile_number='+myN.number
            }
        }
    }

    function ownNumberRegistration() {
        var name = document.getElementById("userNameToAdd").value;
        var number = document.getElementById("userNumberToAdd").value;
        if (name === "" || number === "") {
            swal("お名前と電話番号を\n入力してください。");
        } else {
            let myContact = {
                name : name,
                number : number
            }
            addSingleUserDBIndex(name, number);

        }
    }
    function addSingleUserDBIndex(userName, userNumber) {
        $.ajax({

            type: "POST",
            url: `${apiUrl}/addUser`,
            dataType: 'text',
            contentType: "application/x-www-form-urlencoded",
            data: {

                name: userName,
                mobile_number: userNumber,


            },
            success: function (res) {
                let res_data = JSON.parse(res)
                localStorage.setItem("auth_id",res_data.auth_id);
                localStorage.setItem("auth_email",res_data.mail);
                localStorage.setItem("auth_name",res_data.name);
                document.getElementById("userNameToAdd").value = "";

                document.getElementById("userNumberToAdd").value = "";
                $("#divForAllValues").empty();
                allUsers = null;
                getAllUsersFunction();
                $('#mymodal33').modal('close');

                setTimeout(()=>{
                    localStorage.setItem("myNumber",JSON.stringify({
                        name : userName,
                        number : userNumber
                    }))
                    location.href = '?user_mobile_number='+userNumber
                }, 500)
            },


            error: function (errordata) {
                alert('failure');
            }


        });
    }

    function onShare() {
        console.log(1);
        $.ajax({

            type: "GET",
            url: `${apiUrl}/get-share/${localStorage.getItem("auth_id")}`,
            dataType: 'text',
            contentType: "application/x-www-form-urlencoded",
            success: function (res) {
                console.log(res);
                let res_data = JSON.parse(res);
                if (res_data.status == "success") {
                    document.getElementById("iconP").style.display = "block";
                }
            },
            error: function (errordata) {
            }


        });
    }
    onShare();
</script>
</body>

</html>
